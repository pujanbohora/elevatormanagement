import 'package:elevatormaintance/screen/auth/auth_view_model.dart';import 'package:flutter/cupertino.dart';import 'package:flutter/material.dart';import 'package:provider/provider.dart';import 'package:shared_preferences/shared_preferences.dart';import '../../../../config/api_response.config.dart';import '../../../../config/hive_config.dart';import '../../../../config/preference.config.dart';import '../../../../constants/app_color.dart';import '../../../auth/login_screen.dart';import '../../../widget/custom_app_bar.dart';class ViewAccountScreen extends StatefulWidget {  const ViewAccountScreen({Key? key}) : super(key: key);  @override  State<ViewAccountScreen> createState() => _ViewAccountScreenState();}class _ViewAccountScreenState extends State<ViewAccountScreen> {  late AuthViewModel provider1;  final SharedPreferences localStorage = PreferenceUtils.instance;  @override  void initState() {    // TODO: implement initState    print("your are in profile page");    WidgetsBinding.instance.addPostFrameCallback((_) {      provider1 = Provider.of<AuthViewModel>(context, listen: false);      provider1.fetchUser();    });    super.initState();  }  logout() async {    HiveUtils.box.clear();    await localStorage.remove('user');    await localStorage.remove('token');    await localStorage.remove('refresh');  }  @override  Widget build(BuildContext context) {    double mediaQueryHeight = MediaQuery.of(context).size.height;    double heightBetweenTextField = mediaQueryHeight * 0.04;    Size size = MediaQuery.of(context).size;    return Consumer<AuthViewModel>(      builder: (context, auth, child) {        return        Scaffold(          // backgroundColor: const Color(0xffE4F2F7),          appBar:          appBar(noBackButton: true, navTitle: "Profile ",),          body: isLoading(auth.userApiResponse) ?          Center(child: CircularProgressIndicator()) : SafeArea(            child: SingleChildScrollView(              child: Padding(                padding:                const EdgeInsets.symmetric(horizontal: 13, vertical: 20),                child: LayoutBuilder(builder: (context, constraints) {                  return Column(                    children: [                      SizedBox(                        child: Column(                          crossAxisAlignment: CrossAxisAlignment.start,                          children: [                            Row(                              children: [                                const CircleAvatar(                                    radius: 40,                                    backgroundImage: AssetImage(                                        "assets/icons/profile.png")),                                Padding(                                  padding: const EdgeInsets.symmetric(                                      horizontal: 10),                                  child: Column(                                    crossAxisAlignment:                                    CrossAxisAlignment.start,                                    children: [                                      Text( auth.user.firstName.toString()+ " " + auth.user.lastName.toString(),                                        style: Theme.of(context)                                            .textTheme                                            .bodyText2!                                            .copyWith(                                          fontWeight: FontWeight.bold,                                          fontSize: 16,                                        ),                                      ),                                      Text(                                        auth.user.displayName.toString(),                                      ),                                      const Text(                                        "Manager",                                      ),                                    ],                                  ),                                ),                              ],                            ),                            SizedBox(                              height: mediaQueryHeight * 0.03,                            ),                            // Container(                            //   width: double.infinity,                            //   padding: const EdgeInsets.symmetric(                            //       horizontal: 20, vertical: 20),                            //   decoration: BoxDecoration(                            //     color: Colors.white,                            //     borderRadius: BorderRadius.circular(12),                            //   ),                            //   child: Column(                            //     crossAxisAlignment: CrossAxisAlignment.start,                            //     children: [                            //       const Text(                            //         "Contact Number",                            //       ),                            //       SizedBox(                            //         height: mediaQueryHeight * 0.01,                            //       ),                            //       Text(                            //          "9898989898",                            //       ),                            //       SizedBox(                            //         height: heightBetweenTextField,                            //       ),                            //       const Text(                            //         'Bio',                            //       ),                            //       SizedBox(                            //         height: mediaQueryHeight * 0.01,                            //       ),                            //       Text(                            //          "details",                            //       ),                            //     ],                            //   ),                            // ),                          ],                        ),                      ),                      SizedBox(                        height: mediaQueryHeight * 0.04,                      ),                      InkWell(                        onTap: () {},                        child: SizedBox(                          height: 40,                          width: double.infinity,                          child: Row(                            children: [                              const Icon(Icons.edit),                              const SizedBox(                                width: 10,                              ),                              Text(                                'Edit Profile',                                style: Theme.of(context)                                    .textTheme                                    .bodyText1!                                    .copyWith(                                    color: black,                                    fontSize: 16,                                    fontFamily: "blackTextSemiBold"),                              ),                            ],                          ),                        ),                      ),                      const Divider(                        color: Colors.black,                      ),                      InkWell(                        onTap: () {},                        child: SizedBox(                          height: 40,                          width: double.infinity,                          child: Row(                            children: [                              const Icon(Icons.password),                              const SizedBox(                                width: 10,                              ),                              Text(                                'Change Password',                                style: Theme.of(context)                                    .textTheme                                    .bodyText1!                                    .copyWith(                                    color: black,                                    fontSize: 16,                                    fontFamily: "blackTextSemiBold"),                              ),                            ],                          ),                        ),                      ),                      const Divider(                        color: Colors.black,                      ),                      InkWell(                        onTap: () async {                          logout();                          Navigator.pushReplacement(                              context,                              MaterialPageRoute(                                  builder: (context) => LoginScreen()));                        },                        child: SizedBox(                          height: 40,                          width: double.infinity,                          child: Row(                            children: [                              const Icon(Icons.logout),                              const SizedBox(                                width: 10,                              ),                              Text(                                'Log Out',                                style: Theme.of(context)                                    .textTheme                                    .bodyText1!                                    .copyWith(                                    color: black,                                    fontSize: 16,                                    fontFamily: "blackTextSemiBold"),                              ),                            ],                          ),                        ),                      )                    ],                  );                }),              ),            ),          ),        );      }    );  }}
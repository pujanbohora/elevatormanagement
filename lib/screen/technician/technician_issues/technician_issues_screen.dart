import 'package:flutter/gestures.dart';import 'package:flutter/material.dart';import 'package:intl/intl.dart';import '../../../api/repositories/customer_issue_repo.dart';import '../../../constants/app_color.dart';import '../../../constants/constants_name.dart';import '../../../constants/font_size.dart';import '../../../constants/font_weight.dart';import '../../../constants/route_name.dart';import '../../../constants/text_style.dart';class TechnicianIssuesScreen extends StatefulWidget {  const TechnicianIssuesScreen({Key? key}) : super(key: key);  @override  State<TechnicianIssuesScreen> createState() =>      _TechnicianIssuesScreenState();}class _TechnicianIssuesScreenState    extends State<TechnicianIssuesScreen>    with SingleTickerProviderStateMixin {  late TabController _tabController3;  late Future<List<dynamic>> issuesValue;  @override  void initState() {    _tabController3 = TabController(        length: myTabs2.length, vsync: this, initialIndex: 0);    issuesValue = IssuesRepository().getAllIssue();    super.initState();  }  refreshPage() {    setState(() {      issuesValue = IssuesRepository().getAllIssue();    });  }  final List<Tab> myTabs2 = <Tab>[    Tab(      child: Text(        "Issues",        style: bS12W4.copyWith(            fontSize: font_14, fontWeight: FontWeight.w600),      ),    ),    Tab(      child: Text(        "Issues Acceptance",        style: bS12W4.copyWith(            fontSize: font_14, fontWeight: FontWeight.w600),      ),    ),  ];  List<Widget> outerList = [];  @override  Widget build(BuildContext context) {    return DefaultTabController(      length: myTabs2.length,      child: NestedScrollView(        physics: const NeverScrollableScrollPhysics(),        headerSliverBuilder: (context, innerScrolled) =>        <Widget>[          issuesHeader(context, _tabController3, myTabs2),        ],        body: TabBarView(          controller: _tabController3,          dragStartBehavior: DragStartBehavior.down,          children: [             RefreshIndicator(               onRefresh: () async {                 setState(() {                   issuesValue = IssuesRepository().getAllIssue();                 });               },               child: FutureBuilder<List<dynamic>>(            future: issuesValue,            builder: (context, snapshot) {                if (snapshot.hasData) {                  return SingleChildScrollView(                    physics: const AlwaysScrollableScrollPhysics(),                    child: Padding(                        padding: const EdgeInsets.symmetric(                            horizontal: 10, vertical: 20),                        child: Column(                          children: [                            Container(                                padding: const EdgeInsets.symmetric(                                    horizontal: 10, vertical: 10),                                decoration: BoxDecoration(                                  borderRadius:                                  BorderRadius.circular(10.0),                                  color: primary,                                ),                                child: Row(                                  crossAxisAlignment:                                  CrossAxisAlignment.center,                                  children: [                                    Expanded(                                      flex: 3,                                      child: Column(                                        mainAxisAlignment:                                        MainAxisAlignment.center,                                        crossAxisAlignment:                                        CrossAxisAlignment.center,                                        children: [                                          const Icon(                                            Icons.shopping_cart,                                            color: white,                                          ),                                          Text(                                            TOTAL_ISSUE_LBL,                                            style: Theme.of(context)                                                .textTheme                                                .subtitle2!                                                .copyWith(color: white),                                            maxLines: 2,                                            softWrap: true,                                            overflow:                                            TextOverflow.ellipsis,                                            textAlign: TextAlign.center,                                          ),                                          Text(                                            snapshot.data!.length                                                .toString(),                                            maxLines: 2,                                            softWrap: true,                                            overflow:                                            TextOverflow.ellipsis,                                            style: TextStyle(                                                color: white,                                                fontWeight:                                                FontWeight.bold),                                          )                                        ],                                      ),                                    ),                                    Expanded(                                      flex: 3,                                      child: InkWell(                                        onTap: () {},                                        child: Column(                                          mainAxisAlignment:                                          MainAxisAlignment.center,                                          crossAxisAlignment:                                          CrossAxisAlignment.center,                                          children: [                                            const Icon(                                              Icons                                                  .account_balance_wallet,                                              color: white,                                            ),                                            Text(                                              TOTAL_ONGOING_ISSUE,                                              style: Theme.of(context)                                                  .textTheme                                                  .subtitle2!                                                  .copyWith(                                                  color: white),                                              maxLines: 2,                                              softWrap: true,                                              overflow:                                              TextOverflow.ellipsis,                                              textAlign:                                              TextAlign.center,                                            ),                                            const Text(                                              "0",                                              maxLines: 2,                                              softWrap: true,                                              overflow:                                              TextOverflow.ellipsis,                                              style: TextStyle(                                                color: white,                                                fontWeight:                                                FontWeight.bold,                                              ),                                            )                                          ],                                        ),                                      ),                                    ),                                    Expanded(                                      flex: 3,                                      child: InkWell(                                        onTap: () {},                                        child: Column(                                          mainAxisAlignment:                                          MainAxisAlignment.center,                                          crossAxisAlignment:                                          CrossAxisAlignment.center,                                          children: [                                            const Icon(                                              Icons.card_travel,                                              color: white,                                            ),                                            Text(                                              PENDING_ISSUE_LBL,                                              style: Theme.of(context)                                                  .textTheme                                                  .subtitle2!                                                  .copyWith(                                                  color: white),                                              maxLines: 2,                                              softWrap: true,                                              overflow:                                              TextOverflow.ellipsis,                                              textAlign:                                              TextAlign.center,                                            ),                                            const Text(                                              "0",                                              maxLines: 2,                                              softWrap: true,                                              overflow:                                              TextOverflow.ellipsis,                                              style: TextStyle(                                                  color: white,                                                  fontWeight:                                                  FontWeight.bold),                                            )                                          ],                                        ),                                      ),                                    ),                                  ],                                )),                            const SizedBox(                              height: 20,                            ),                            Container(                              decoration: const BoxDecoration(                                  borderRadius: BorderRadius.only(                                      topLeft: Radius.circular(10.0),                                      topRight: Radius.circular(10.0)),                                  color: white,                                  boxShadow: [                                    BoxShadow(                                      offset: Offset(0, -9),                                      blurRadius: 10,                                      spreadRadius: 0,                                      color: shadowColor,                                    )                                  ]),                              child: ListView.builder(                                padding: EdgeInsets.zero,                                physics: const BouncingScrollPhysics(),                                shrinkWrap: true,                                itemCount: snapshot.data!.length,                                itemBuilder: (context, index) {                                  if(snapshot.data![index]["status"] == "RESOLVED"){                                    outerList.add(Card(                                      elevation: 0,                                      margin: const EdgeInsets.only(                                          bottom: 10.0,                                          top: 13.0,                                          left: 7.0,                                          right: 7.0),                                      child: Container(                                        decoration: BoxDecoration(                                            color: cardBgColor,                                            borderRadius:                                            BorderRadius.circular(8)),                                        child: InkWell(                                          child: Padding(                                              padding:                                              const EdgeInsets.all(                                                  8.0),                                              child: Column(                                                  crossAxisAlignment:                                                  CrossAxisAlignment                                                      .start,                                                  children: <Widget>[                                                    Padding(                                                      padding:                                                      const EdgeInsets                                                          .symmetric(                                                          horizontal:                                                          8.0),                                                      child: Row(                                                        mainAxisSize:                                                        MainAxisSize                                                            .min,                                                        children: <                                                            Widget>[                                                          Text(                                                              "Ordered Date: ${DateFormat('dd-MM-yyyy').format(DateTime.parse(snapshot.data![index]["ordered_date"]))}"),                                                          Spacer(),                                                          Container(                                                            margin: const EdgeInsets                                                                .only(                                                                left: 8),                                                            padding: const EdgeInsets                                                                .symmetric(                                                                horizontal:                                                                10,                                                                vertical:                                                                4),                                                            decoration: const BoxDecoration(                                                                color:                                                                black,                                                                borderRadius:                                                                BorderRadius.all(                                                                    Radius.circular(4.0))),                                                            child: Text(                                                              snapshot.data![index]["status"],                                                              style: TextStyle(                                                                  color:                                                                  white),                                                            ),                                                          )                                                        ],                                                      ),                                                    ),                                                    const Divider(),                                                    Padding(                                                      padding:                                                      const EdgeInsets                                                          .symmetric(                                                          horizontal:                                                          8.0,                                                          vertical:                                                          5),                                                      child: Text(                                                        snapshot                                                            .data![index]                                                        ["title"]                                                            .toString(),                                                        maxLines: 1,                                                        overflow:                                                        TextOverflow                                                            .ellipsis,                                                      ),                                                    ),                                                    Padding(                                                      padding:                                                      const EdgeInsets                                                          .symmetric(                                                          horizontal:                                                          8.0,                                                          vertical:                                                          5),                                                      child: Row(                                                        children: [                                                          Row(                                                            children: [                                                              const Icon(                                                                  Icons                                                                      .person,                                                                  size:                                                                  14),                                                              Text(                                                                  " Assigned to: ${snapshot.data![index]["assigned_to"][0]["email"].toString()}"),                                                            ],                                                          ),                                                        ],                                                      ),                                                    ),                                                    // Padding(                                                    //   padding:                                                    //       const EdgeInsets                                                    //               .symmetric(                                                    //           horizontal:                                                    //               8.0,                                                    //           vertical:                                                    //               5),                                                    //   child: Row(                                                    //     children: const [                                                    //       Icon(                                                    //           Icons                                                    //               .date_range,                                                    //           size: 14),                                                    //       Text(" Order on: " +                                                    //           "model.orderDate!"),                                                    //     ],                                                    //   ),                                                    // )                                                  ])),                                          onTap: () {                                            Navigator.pushNamed(context,                                                routeIssueDetails,                                                arguments: snapshot                                                    .data![index]);                                          },                                        ),                                      ),                                    ));                                  }                                  return snapshot.data![index]["status"] == "OPEN" || snapshot.data![index]["status"] == "PROGRESS" || snapshot.data![index]["status"] == "ACCEPTED" ?                                  Card(                                    elevation: 0,                                    margin: const EdgeInsets.only(                                        bottom: 10.0,                                        top: 13.0,                                        left: 7.0,                                        right: 7.0),                                    child: Container(                                      decoration: BoxDecoration(                                          color: cardBgColor,                                          borderRadius:                                          BorderRadius.circular(8)),                                      child: InkWell(                                        child: Padding(                                            padding:                                            const EdgeInsets.all(                                                8.0),                                            child: Column(                                                crossAxisAlignment:                                                CrossAxisAlignment                                                    .start,                                                children: <Widget>[                                                  Padding(                                                    padding:                                                    const EdgeInsets                                                        .symmetric(                                                        horizontal:                                                        8.0),                                                    child: Row(                                                      mainAxisSize:                                                      MainAxisSize                                                          .min,                                                      children: <                                                          Widget>[                                                        Text(                                                            "Ordered Date: ${DateFormat('dd-MM-yyyy').format(DateTime.parse(snapshot.data![index]["ordered_date"]))}"),                                                        Spacer(),                                                        Container(                                                          margin: const EdgeInsets                                                              .only(                                                              left: 8),                                                          padding: const EdgeInsets                                                              .symmetric(                                                              horizontal:                                                              10,                                                              vertical:                                                              4),                                                          decoration: const BoxDecoration(                                                              color:                                                              black,                                                              borderRadius:                                                              BorderRadius.all(                                                                  Radius.circular(4.0))),                                                          child: Text(                                                            snapshot.data![index]["status"],                                                            style: TextStyle(                                                                color:                                                                white),                                                          ),                                                        )                                                      ],                                                    ),                                                  ),                                                  const Divider(),                                                  Padding(                                                    padding:                                                    const EdgeInsets                                                        .symmetric(                                                        horizontal:                                                        8.0,                                                        vertical:                                                        5),                                                    child: Text(                                                      snapshot                                                          .data![index]                                                      ["title"]                                                          .toString(),                                                      maxLines: 1,                                                      overflow:                                                      TextOverflow                                                          .ellipsis,                                                    ),                                                  ),                                                  Padding(                                                    padding:                                                    const EdgeInsets                                                        .symmetric(                                                        horizontal:                                                        8.0,                                                        vertical:                                                        5),                                                    child: Row(                                                      children: [                                                        Row(                                                          children: [                                                            const Icon(                                                                Icons                                                                    .person,                                                                size:                                                                14),                                                            Text(                                                                " Assigned to: ${snapshot.data![index]["assigned_to"][0]["email"].toString()}"),                                                          ],                                                        ),                                                      ],                                                    ),                                                  ),                                                  // Padding(                                                  //   padding:                                                  //       const EdgeInsets                                                  //               .symmetric(                                                  //           horizontal:                                                  //               8.0,                                                  //           vertical:                                                  //               5),                                                  //   child: Row(                                                  //     children: const [                                                  //       Icon(                                                  //           Icons                                                  //               .date_range,                                                  //           size: 14),                                                  //       Text(" Order on: " +                                                  //           "model.orderDate!"),                                                  //     ],                                                  //   ),                                                  // )                                                ])),                                        onTap: () {                                          Navigator.pushNamed(context,                                              routeIssueDetails,                                              arguments: snapshot                                                  .data![index]);                                        },                                      ),                                    ),                                  ) : Container();                                },                              ),                            ),                          ],                        )),                  );                } else if (snapshot.hasError) {                  return Center(child: Text(snapshot.error.toString()));                } else {                  return const Center(                      child: CircularProgressIndicator());                }            }),             ),            RefreshIndicator(                onRefresh: () async {                  setState(() {                    issuesValue = IssuesRepository().getAllIssue();                  });                },                child: FutureBuilder<List<dynamic>>(                future: issuesValue,                builder: (context, snapshot) {                  if (snapshot.hasData) {                    return SingleChildScrollView(                      physics: const AlwaysScrollableScrollPhysics(),                      child: Padding(                          padding: const EdgeInsets.symmetric(                              horizontal: 10, vertical: 20),                          child: Column(                            children: [                              // Container(                              //     padding: const EdgeInsets.symmetric(                              //         horizontal: 10, vertical: 10),                              //     decoration: BoxDecoration(                              //       borderRadius:                              //       BorderRadius.circular(10.0),                              //       color: primary,                              //     ),                              //     child: Row(                              //       crossAxisAlignment:                              //       CrossAxisAlignment.center,                              //       children: [                              //         Expanded(                              //           flex: 3,                              //           child: Column(                              //             mainAxisAlignment:                              //             MainAxisAlignment.center,                              //             crossAxisAlignment:                              //             CrossAxisAlignment.center,                              //             children: [                              //               const Icon(                              //                 Icons.shopping_cart,                              //                 color: white,                              //               ),                              //               Text(                              //                 TOTAL_ORDER_LBL,                              //                 style: Theme.of(context)                              //                     .textTheme                              //                     .subtitle2!                              //                     .copyWith(color: white),                              //                 maxLines: 2,                              //                 softWrap: true,                              //                 overflow:                              //                 TextOverflow.ellipsis,                              //                 textAlign: TextAlign.center,                              //               ),                              //               Text(                              //                 snapshot.data!.length                              //                     .toString(),                              //                 maxLines: 2,                              //                 softWrap: true,                              //                 overflow:                              //                 TextOverflow.ellipsis,                              //                 style: TextStyle(                              //                     color: white,                              //                     fontWeight:                              //                     FontWeight.bold),                              //               )                              //             ],                              //           ),                              //         ),                              //         Expanded(                              //           flex: 3,                              //           child: InkWell(                              //             onTap: () {},                              //             child: Column(                              //               mainAxisAlignment:                              //               MainAxisAlignment.center,                              //               crossAxisAlignment:                              //               CrossAxisAlignment.center,                              //               children: [                              //                 const Icon(                              //                   Icons                              //                       .account_balance_wallet,                              //                   color: white,                              //                 ),                              //                 Text(                              //                   BAL_LBL,                              //                   style: Theme.of(context)                              //                       .textTheme                              //                       .subtitle2!                              //                       .copyWith(                              //                       color: white),                              //                   maxLines: 2,                              //                   softWrap: true,                              //                   overflow:                              //                   TextOverflow.ellipsis,                              //                   textAlign:                              //                   TextAlign.center,                              //                 ),                              //                 const Text(                              //                   "0",                              //                   maxLines: 2,                              //                   softWrap: true,                              //                   overflow:                              //                   TextOverflow.ellipsis,                              //                   style: TextStyle(                              //                     color: white,                              //                     fontWeight:                              //                     FontWeight.bold,                              //                   ),                              //                 )                              //               ],                              //             ),                              //           ),                              //         ),                              //         Expanded(                              //           flex: 3,                              //           child: InkWell(                              //             onTap: () {},                              //             child: Column(                              //               mainAxisAlignment:                              //               MainAxisAlignment.center,                              //               crossAxisAlignment:                              //               CrossAxisAlignment.center,                              //               children: [                              //                 const Icon(                              //                   Icons.card_travel,                              //                   color: white,                              //                 ),                              //                 Text(                              //                   PENDING_ORDER_LBL,                              //                   style: Theme.of(context)                              //                       .textTheme                              //                       .subtitle2!                              //                       .copyWith(                              //                       color: white),                              //                   maxLines: 2,                              //                   softWrap: true,                              //                   overflow:                              //                   TextOverflow.ellipsis,                              //                   textAlign:                              //                   TextAlign.center,                              //                 ),                              //                 const Text(                              //                   "0",                              //                   maxLines: 2,                              //                   softWrap: true,                              //                   overflow:                              //                   TextOverflow.ellipsis,                              //                   style: TextStyle(                              //                       color: white,                              //                       fontWeight:                              //                       FontWeight.bold),                              //                 )                              //               ],                              //             ),                              //           ),                              //         ),                              //       ],                              //     )),                              const SizedBox(                                height: 20,                              ),                              Container(                                decoration: const BoxDecoration(                                    borderRadius: BorderRadius.only(                                        topLeft: Radius.circular(10.0),                                        topRight: Radius.circular(10.0)),                                    color: white,                                    boxShadow: [                                      BoxShadow(                                        offset: Offset(0, -9),                                        blurRadius: 10,                                        spreadRadius: 0,                                        color: shadowColor,                                      )                                    ]),                                child: ListView.builder(                                  padding: EdgeInsets.zero,                                  physics: const BouncingScrollPhysics(),                                  shrinkWrap: true,                                  itemCount: snapshot.data!.length,                                  itemBuilder: (context, index) {                                    if(snapshot.data![index]["status"] == "RESOLVED"){                                      outerList.add(Card(                                        elevation: 0,                                        margin: const EdgeInsets.only(                                            bottom: 10.0,                                            top: 13.0,                                            left: 7.0,                                            right: 7.0),                                        child: Container(                                          decoration: BoxDecoration(                                              color: cardBgColor,                                              borderRadius:                                              BorderRadius.circular(8)),                                          child: InkWell(                                            child: Padding(                                                padding:                                                const EdgeInsets.all(                                                    8.0),                                                child: Column(                                                    crossAxisAlignment:                                                    CrossAxisAlignment                                                        .start,                                                    children: <Widget>[                                                      Padding(                                                        padding:                                                        const EdgeInsets                                                            .symmetric(                                                            horizontal:                                                            8.0),                                                        child: Row(                                                          mainAxisSize:                                                          MainAxisSize                                                              .min,                                                          children: <                                                              Widget>[                                                            Text(                                                                "Ordered Date: ${DateFormat('dd-MM-yyyy').format(DateTime.parse(snapshot.data![index]["ordered_date"]))}"),                                                            Spacer(),                                                            Container(                                                              margin: const EdgeInsets                                                                  .only(                                                                  left: 8),                                                              padding: const EdgeInsets                                                                  .symmetric(                                                                  horizontal:                                                                  10,                                                                  vertical:                                                                  4),                                                              decoration: const BoxDecoration(                                                                  color:                                                                  black,                                                                  borderRadius:                                                                  BorderRadius.all(                                                                      Radius.circular(4.0))),                                                              child: Text(                                                                snapshot.data![index]["status"],                                                                style: TextStyle(                                                                    color:                                                                    white),                                                              ),                                                            )                                                          ],                                                        ),                                                      ),                                                      const Divider(),                                                      Padding(                                                        padding:                                                        const EdgeInsets                                                            .symmetric(                                                            horizontal:                                                            8.0,                                                            vertical:                                                            5),                                                        child: Text(                                                          snapshot                                                              .data![index]                                                          ["title"]                                                              .toString(),                                                          maxLines: 1,                                                          overflow:                                                          TextOverflow                                                              .ellipsis,                                                        ),                                                      ),                                                      Padding(                                                        padding:                                                        const EdgeInsets                                                            .symmetric(                                                            horizontal:                                                            8.0,                                                            vertical:                                                            5),                                                        child: Row(                                                          children: [                                                            Row(                                                              children: [                                                                const Icon(                                                                    Icons                                                                        .person,                                                                    size:                                                                    14),                                                                Text(                                                                    " Assigned to: ${snapshot.data![index]["assigned_to"][0]["email"].toString()}"),                                                              ],                                                            ),                                                          ],                                                        ),                                                      ),                                                      // Padding(                                                      //   padding:                                                      //       const EdgeInsets                                                      //               .symmetric(                                                      //           horizontal:                                                      //               8.0,                                                      //           vertical:                                                      //               5),                                                      //   child: Row(                                                      //     children: const [                                                      //       Icon(                                                      //           Icons                                                      //               .date_range,                                                      //           size: 14),                                                      //       Text(" Order on: " +                                                      //           "model.orderDate!"),                                                      //     ],                                                      //   ),                                                      // )                                                    ])),                                            onTap: () {                                              Navigator.pushNamed(context,                                                  routeIssueDetails,                                                  arguments: snapshot                                                      .data![index]);                                            },                                          ),                                        ),                                      ));                                    }                                    return snapshot.data![index]["status"] == "RESOLVED" || snapshot.data![index]["status"] == "CLOSED" ?                                    Card(                                      elevation: 0,                                      margin: const EdgeInsets.only(                                          bottom: 10.0,                                          top: 13.0,                                          left: 7.0,                                          right: 7.0),                                      child: Container(                                        decoration: BoxDecoration(                                            color: cardBgColor,                                            borderRadius:                                            BorderRadius.circular(8)),                                        child: InkWell(                                          child: Padding(                                              padding:                                              const EdgeInsets.all(                                                  8.0),                                              child: Column(                                                  crossAxisAlignment:                                                  CrossAxisAlignment                                                      .start,                                                  children: <Widget>[                                                    Padding(                                                      padding:                                                      const EdgeInsets                                                          .symmetric(                                                          horizontal:                                                          8.0),                                                      child: Row(                                                        mainAxisSize:                                                        MainAxisSize                                                            .min,                                                        children: <                                                            Widget>[                                                          Text(                                                              "Ordered Date: ${DateFormat('dd-MM-yyyy').format(DateTime.parse(snapshot.data![index]["ordered_date"]))}"),                                                          Spacer(),                                                          Container(                                                            margin: const EdgeInsets                                                                .only(                                                                left: 8),                                                            padding: const EdgeInsets                                                                .symmetric(                                                                horizontal:                                                                10,                                                                vertical:                                                                4),                                                            decoration: const BoxDecoration(                                                                color:                                                                black,                                                                borderRadius:                                                                BorderRadius.all(                                                                    Radius.circular(4.0))),                                                            child: Text(                                                              snapshot.data![index]["status"],                                                              style: TextStyle(                                                                  color:                                                                  white),                                                            ),                                                          )                                                        ],                                                      ),                                                    ),                                                    const Divider(),                                                    Padding(                                                      padding:                                                      const EdgeInsets                                                          .symmetric(                                                          horizontal:                                                          8.0,                                                          vertical:                                                          5),                                                      child: Text(                                                        snapshot                                                            .data![index]                                                        ["title"]                                                            .toString(),                                                        maxLines: 1,                                                        overflow:                                                        TextOverflow                                                            .ellipsis,                                                      ),                                                    ),                                                    Padding(                                                      padding:                                                      const EdgeInsets                                                          .symmetric(                                                          horizontal:                                                          8.0,                                                          vertical:                                                          5),                                                      child: Row(                                                        children: [                                                          Row(                                                            children: [                                                              const Icon(                                                                  Icons                                                                      .person,                                                                  size:                                                                  14),                                                              Text(                                                                  " Assigned to: ${snapshot.data![index]["assigned_to"][0]["email"].toString()}"),                                                            ],                                                          ),                                                        ],                                                      ),                                                    ),                                                    // Padding(                                                    //   padding:                                                    //       const EdgeInsets                                                    //               .symmetric(                                                    //           horizontal:                                                    //               8.0,                                                    //           vertical:                                                    //               5),                                                    //   child: Row(                                                    //     children: const [                                                    //       Icon(                                                    //           Icons                                                    //               .date_range,                                                    //           size: 14),                                                    //       Text(" Order on: " +                                                    //           "model.orderDate!"),                                                    //     ],                                                    //   ),                                                    // )                                                  ])),                                          onTap: () {                                            Navigator.pushNamed(context,                                                routeIssueDetails,                                                arguments: snapshot                                                    .data![index]);                                          },                                        ),                                      ),                                    ) : Container();                                  },                                ),                              ),                            ],                          )),                    );                  } else if (snapshot.hasError) {                    return Center(child: Text(snapshot.error.toString()));                  } else {                    return const Center(                        child: CircularProgressIndicator());                  }                })),          ],        ),      ),    );  }}SliverAppBar issuesHeader(    BuildContext context,    TabController _tabController3,    List<Tab> myTabs2,) {  return SliverAppBar(    automaticallyImplyLeading: false,    backgroundColor: white,    pinned: true,    floating: true,    snap: false,    expandedHeight: 80,    collapsedHeight: 80,    flexibleSpace: Container(        decoration: const BoxDecoration(            border: Border(                bottom: BorderSide(                  color: Colors.transparent,                ))),        child: FlexibleSpaceBar(            titlePadding: EdgeInsets.zero,            centerTitle: true,            title: Center(              child: Column(                crossAxisAlignment: CrossAxisAlignment.center,                mainAxisAlignment: MainAxisAlignment.end,                children: [                  Padding(                    padding: const EdgeInsets.symmetric(                      horizontal: 20,                    ),                    child: InkWell(                      child: Text(                          "Issues",                          maxLines: 1,                          style: TextStyle(                              color: black, fontWeight: kW7, fontSize: font_18)),                    ),                  ),                  SizedBox(height: 10,),                  Padding(                    padding: const EdgeInsets.symmetric(vertical: 5),                    child: Container(                      height: 42,                      padding: EdgeInsets.zero,                      margin: EdgeInsets.zero,                      child: TabBar(                          controller: _tabController3,                          isScrollable: true,                          indicator:                          const UnderlineTabIndicator(                            borderSide: BorderSide(width: 3.0),                          ),                          padding: const EdgeInsets.symmetric(                              horizontal: 20),                          tabs: myTabs2),                    ),                  ),                ],              ),            ))),  );}